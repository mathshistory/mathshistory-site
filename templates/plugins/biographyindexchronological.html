{% extends "layout.html" %}

{% block title %}Chronological Biographies Index{% endblock %}

{% block body %}

<div class="row">
  <div class="col">
      <h1>Chronological Biographies Index</h1>

      {% if this.jumps|length > 0 %}
      <h4 id="jumps">
        Jump to year:
        {% for jump in this.jumps %}
        <a href="#jump-{{ jump }}">{{ jump }}</a>{% if not loop.last %},{% endif %}
        {% endfor %}
      </h4>
      {% endif %}

      <ul>
      {% for person in this.people %}

        {% if this.jumps|length > 0 %}
        {% if person['birthyear'] > this.jumps|first %}
      </ul>
      <h4 id="jump-{{ this.jumps|first }}">{{ this.jumps.pop(0) }} (<a href="#jumps">Back to top</a>)</h4>
      <ul>
        {% endif %}
        {% endif %}

        <li><a href="{{ person|url }}">{{ person.shortname }}</a>{% if person.birthyear %} ({{ person.birthyear|format_year }} - {% if person.deathyear %}{{ person.deathyear|format_year }}{% endif %}){% endif %}</li>
      {% endfor %}
      </ul>
  </div>

  <!-- SIDEBAR -->
  <aside class="col-md-4">
    <div id="alphabetical-index-jumpbox" class="p-3 mb-3 bg-light rounded">
      <h4>Alphabetical Index</h4>
      {% import 'macros/biographyindextable.html' as table %}
      {{ table.biographyindextable() }}
    </div>

    <div class="p-3 mb-3 bg-light rounded">
      <h4>Categories</h4>
      {% for category in plugin_categories() %}
      <li><a href="{{ '/Biographies/@categoryindex/%s'|format(category['tag'])|url }}">{{ category['name'] }}</a></li>
      {% endfor %}
    </div>
  </aside>
  <!-- END SIDEBAR -->

</div>

{% endblock %}
