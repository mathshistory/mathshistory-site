{% extends "layout.html" %}

{% block title %}{{ this.category.name }} - {{ this.title }}{% endblock %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ '/static/css/indexes.css'|asseturl }}" type="text/css">

<!-- opengraph -->
<meta property="og:title" content="{{ this.category.name }} - {{ this.title }}">
{% if this.category.description|length %}
<meta property="og:description" content="{{ this.category.description }}">
{% endif %}
<meta property="og:site_name" content="Maths History">
<meta property="og:locale" content="en_GB">
<meta property="og:url" content="{{ this|canonical_url }}">

<!-- twitter card -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="Maths History" />
<meta name="twitter:title" content="{{ this.category.name }} - {{ this.title }}" />
{% if this.category.description|length %}
<meta name="twitter:description" content="{{ this.category.description }}" />
{% endif %}
{% endblock %}

{% block body %}
<div class="row">
  <div class="col-md-12">
    <h1>{{ this.category.name }} - {{ this.title }}</h1>
    {% if this.category.description|length %}<p>{{ this.category.description }}</p>{% endif %}
  </div>
</div>

<div class="row">
  <div class="col-md-8">
    <ul>
      {% for display_item in this.pages|query_to_display %}
      <li><a href="{{ display_item.record|url }}">{{ display_item.display }}</a></li>
      {% else %}
      <i>There are no {{ this.title }} pages in the {{ this.category.name }} category.</i>
      {% endfor %}
    </ul>
  </div>

  <!-- SIDEBAR -->
  <aside class="col-md-4">
    <div class="p-3 mb-3 bg-light rounded">
      <h4>Other {{ this.category.name }} Pages</h4>
      <ul>
        <li><a href="{{ '/Biographies/@categoryindex/%s'|format(this.category.tag)|url }}">Biographies</a></li>
        <li><a href="{{ '/HistTopics/@categoryindex/%s'|format(this.category.tag)|url }}">History Topics</a></li>
        <li><a href="{{ '/Honours/@categoryindex/%s'|format(this.category.tag)|url }}">Honours</a></li>
        <li><a href="{{ '/Societies/@categoryindex/%s'|format(this.category.tag)|url }}">Societies</a></li>
      </ul>

      <h4>Other {{ this.title }} Categories</h4>
      <ul>
        {% for category in plugin_categories() %}
        <li><a href="{{ '%s/@categoryindex/%s'|format(this.parent.path, category.tag)|url }}">{{ category.name }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </aside>
  <!-- END SIDEBAR -->
</div>

{% endblock %}
